/*** @author admin*/(function(){	var	__CourseMaterial	= model.CourseMaterial = {},	__events			= __CourseMaterial.events 	= {},	ERRORS				= __myNameSpace.ERRORS;	__events.onValidate = function(){		var		sessionRef		= currentSession(),		curUser			= sessionRef.user,		ROLES			= __myNameSpace.ROLES,		promoteToken 	= sessionRef.promoteWith(ROLES.ADMINISTRATOR),		sStorage		= sessionStorage,		theCourse;				if(!this.course){			return ERRORS.Model.CourseMaterial.emptyCourse;		}				if(this.isNew()){			theCourse 	= this.course;		}		else{			theCourse 	= ds.CourseMaterial(this.ID).course;		}				sessionRef.unPromote(promoteToken);				if(sStorage.role == ROLES.TEACHER){			var			theTeacher	= ds.Teacher(sStorage.ID);						theCourse	= theTeacher.courses.find('ID = :1' , theCourse.ID);						if(!theCourse){				if(this.isNew()){					return ERRORS.Model.CourseMaterial.notAllowedToCreate;				}				else{					return ERRORS.Model.CourseMaterial.notAllowedToCreateOrModify;				}			}		}	}		__events.onSave = function(){//		debugger;//		if(!this.material){//			return ERRORS.Model.CourseMaterial.emptyMaterial;//		}		ds.Log.push(__myNameSpace.LOG.getOperation(this , 'save'));	}		__events.onRemove = function(){		ds.Log.push(__myNameSpace.LOG.getOperation(this , 'remove'));	}})();