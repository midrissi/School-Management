/*** @author admin*/(function(){	var	__Classroom	= model.Classroom 			= {},	__methods	= __Classroom.entityMethods = {},	__events	= __Classroom.events 		= {},    ROLES			= __myNameSpace.ROLES,    directoryROLES	= __myNameSpace.DirectoryROLES;		__Classroom.maint_cost = {		onGet: function(){			if(!this.private_maint_cost){				if(this.school){					return this.school.defaultMaintCost;				}			}			else{				return this.private_maint_cost;			}		},		onSet : function(value){			this.private_maint_cost = value;		}	}		__methods.isBusy = function(timeTable){		return ds.Utils.isBusy({			timeTable	: timeTable,			timeTables	: this.timeTables		});	}		__events.onRestrictingQuery = function(){		var        sessionRef		= currentSession(),        theUser;		        switch(true){            case sessionRef.belongsTo(directoryROLES.RECORDOFFICER)	:                return this.all();            case sessionRef.belongsTo(directoryROLES.TEACHER) && typeof sessionStorage.ID != 'undefined' :                var user = ds.Teacher(sessionStorage.ID);				if(user){					return user.timeTables.classroom;				}				break;            case sessionRef.belongsTo(directoryROLES.STUDENT) && typeof sessionStorage.ID != 'undefined' :                var user = ds.Student(sessionStorage.ID);				if(user && user.studyGroup){					return user.studyGroup.timeTables.classroom;				}				break;            case sessionRef.belongsTo(directoryROLES.PARENT) && typeof sessionStorage.ID != 'undefined' :                var				res 	= this.createEntityCollection(),				user 	= ds.Parent(sessionStorage.ID);								if(user){					user.children.forEach(function(entity){						res.or(entity.studyGroup.timeTables.classroom);					});				}								return res;        }				return this.createEntityCollection();	}		__events.onSave = function(){		if(!this.school){			this.school = ds.School.first();		}		ds.Log.push(__myNameSpace.LOG.getOperation(this , 'save'));	}		__events.onRemove = function(){		ds.Log.push(__myNameSpace.LOG.getOperation(this , 'remove'));	}})();