_ns.adminView 	= _ns.adminView || {};_ns._messages 	= _ns._messages	|| {};function insertColPicker(dg , removeBtn , options){	options = $.extend({} , {		rowHeight	: 33,		marginLeft	: 25,		marginRight	: 36,		colPOptions : {			attrName 	: null,			selectImg	: '/images/color.png',			css 		: {							}		},		remOptions: {			image	: '/images/delete1.png',			css 	: {				width	: 20,				height	: 20,				left	: 4,				top		: 6			}		},		confirm : 'Do you want to remove this record ?'	} , options);		dg.setRowHeight(options.rowHeight);		WAF.addListener(dg.id, "onRowDraw", function(event){		var		dataSource	= event.dataSource,		cellNb		= 0,		cellW		= parseInt(event.row.cells[cellNb].col.width),		cell 		= $(event.row.cells[cellNb].dom).addClass('colorPicker'),		content		= cell.find('.content'),		delBtn		= $('<div>'),		colPicker	= $('<div>'),		skip		= false,		remOptions	= options.remOptions,		colPOptions	= options.colPOptions;				if(!event.element){			cell.find('.smColorPicker').remove()			skip = true;		}		else if(cell.find('.smColorPicker').length){			cell			.find('.smColorPicker')			.smColorPicker('setColor' , event.element.color);						skip = true;		}				if(skip){			return;		}				colPOptions = $.extend( true , {			datasource: dataSource,			format: 'hex',			save:true,			dispatch: true,			initColor: event.element[colPOptions.attrName],			onBeforeShow: function(){				dataSource.select(colPicker.data('position'));			}		} , colPOptions)				cell		.append(colPicker);				content		.width(cellW - options.marginRight - (removeBtn?options.marginLeft:0));				content		.width(270);		colPicker		.css({			position: 'absolute',			top:0,			left:232,			width: options.marginRight,			height: options.rowHeight		})		.data({			position: event.row.rowNumber		});				if(colPOptions.attrName){			colPicker.smColorPicker(colPOptions);		}				if(removeBtn && !cell.find('.remove').length){			var			img = $('<img>')			.attr({				width:'100%',				height:'100%',				src: remOptions.image || '/images/delete.png'			});						delBtn			.addClass('remove')			.css(remOptions.css)			.appendTo(cell)			.append(img)			.data({				position: event.row.rowNumber			})			.click(function(){				var				msg = options.confirm;								dataSource.select($(this).data('position'));								if(typeof dhtmlx != "undefined" && dhtmlx.confirm){					dhtmlx.confirm({						type:"confirm-warning",						text: msg,						callback: function(resp) {							if(resp){								dataSource.removeCurrent();							}						}					})				}				else if(confirm(msg)){					dataSource.removeCurrent();				}			});						content			.css({				left: options.marginLeft			});		}	}, "WAF");		if(removeBtn){		var		$col = dg		.$domNode		.find('.waf-dataGrid-header .waf-dataGrid-col-0 .content');				$col		.width($col.width - options.marginLeft)		.css({			left : options.marginLeft		});	}		dg.redraw();}